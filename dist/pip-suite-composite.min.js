!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).standalone=t()}}(function(){return function s(c,p,r){function l(e,t){if(!p[e]){if(!c[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(a)return a(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=p[e]={exports:{}};c[e][0].call(o.exports,function(t){return l(c[e][1][t]||t)},o,o.exports,s,c,p,r)}return p[e].exports}for(var a="function"==typeof require&&require,t=0;t<r.length;t++)l(r[t]);return l}({1:[function(t,F,e){(function(R,U,V){!function(){var t,g={};function b(){}function r(t){return t}function e(t){return!!t}function i(t){return!t}var n="object"==typeof self&&self.self===self&&self||"object"==typeof U&&U.global===U&&U||this;function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function C(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}null!=n&&(t=n.async),g.noConflict=function(){return n.async=t,g};var o=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===o.call(t)};function c(t){return y(t)||"number"==typeof t.length&&0<=t.length&&t.length%1==0}function v(t,e){for(var i=-1,n=t.length;++i<n;)e(t[i],i,t)}function l(t,e){for(var i=-1,n=t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}function s(t){return l(Array(t),function(t,e){return e})}function $(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var k=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};function d(t){var e,i,n=-1;return c(t)?(e=t.length,function(){return++n<e?n:null}):(i=k(t),e=i.length,function(){return++n<e?i[n]:null})}function E(n,o){return o=null==o?n.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),i=0;i<t;i++)e[i]=arguments[i+o];switch(o){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e)}}}function p(n){return function(t,e,i){return n(t,i)}}var u="function"==typeof V&&V,h=u?function(t){u(t)}:function(t){setTimeout(t,0)};function m(l){return function(i,n,o){o=C(o||b);var s=d(i=i||[]);if(l<=0)return o(null);var c=!1,p=0,r=!1;!function e(){if(c&&p<=0)return o(null);for(;p<l&&!r;){var t=s();if(null===t)return c=!0,void(p<=0&&o(null));p+=1,n(i[t],t,a(function(t){--p,t?(o(t),r=!0):e()}))}}()}}function f(n){return function(t,e,i){return n(g.eachOf,t,e,i)}}function T(o){return function(t,e,i,n){return o(m(e),t,i,n)}}function _(n){return function(t,e,i){return n(g.eachOfSeries,t,e,i)}}function x(t,e,o,i){i=C(i||b);var s=c(e=e||[])?[]:{};t(e,function(t,i,n){o(t,function(t,e){s[i]=e,n(t)})},function(t){i(t,s)})}function w(t,e,o,i){var s=[];t(e,function(e,i,n){o(e,function(t){t&&s.push({index:i,value:e}),n()})},function(){i(l(s.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function D(t,e,i,n){w(t,e,function(t,e){i(t,function(t){e(!t)})},n)}function I(c,p,r){return function(t,e,n,o){function i(){o&&o(r(!1,void 0))}function s(e,t,i){if(!o)return i();n(e,function(t){o&&p(t)&&(o(r(!0,e)),o=n=!1),i()})}3<arguments.length?c(t,e,s,i):(o=n,n=e,c(t,s,i))}}function O(t,e){return e}function S(t,e,i){i=i||b;var o=c(e)?[]:{};t(e,function(t,i,n){t(E(function(t,e){e.length<=1&&(e=e[0]),o[i]=e,n(t)}))},function(t){i(t,o)})}function P(t,e,n,i){var o=[];t(e,function(t,e,i){n(t,function(t,e){o=o.concat(e||[]),i(t)})},function(t){i(t,o)})}function L(n,t,e){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");function i(i,t,n,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length&&i.idle())return g.setImmediate(function(){i.drain()});v(t,function(t){var e={data:t,callback:o||b};n?i.tasks.unshift(e):i.tasks.push(e),i.tasks.length===i.concurrency&&i.saturated()}),g.setImmediate(i.process)}function o(e,i){return function(){--s;var n=!1,t=arguments;v(i,function(i){v(c,function(t,e){t!==i||n||(c.splice(e,1),n=!0)}),i.callback.apply(i,t)}),e.tasks.length+s===0&&e.drain(),e.process()}}var s=0,c=[],p={tasks:[],concurrency:t,payload:e,saturated:b,empty:b,drain:b,started:!1,paused:!1,push:function(t,e){i(p,t,!1,e)},kill:function(){p.drain=b,p.tasks=[]},unshift:function(t,e){i(p,t,!0,e)},process:function(){for(;!p.paused&&s<p.concurrency&&p.tasks.length;){var t=p.payload?p.tasks.splice(0,p.payload):p.tasks.splice(0,p.tasks.length),e=l(t,function(t){return t.data});0===p.tasks.length&&p.empty(),s+=1,c.push(t[0]);var i=a(o(p,t));n(e,i)}},length:function(){return p.tasks.length},running:function(){return s},workersList:function(){return c},idle:function(){return p.tasks.length+s===0},pause:function(){p.paused=!0},resume:function(){if(!1!==p.paused){p.paused=!1;for(var t=Math.min(p.concurrency,p.tasks.length),e=1;e<=t;e++)g.setImmediate(p.process)}}};return p}function M(i){return E(function(t,e){t.apply(null,e.concat([E(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[i]&&v(e,function(t){console[i](t)}))})]))})}function B(n){return function(t,e,i){n(s(t),e,i)}}function j(s){return E(function(e,t){var i=E(function(n){var o=this,t=n.pop();return s(e,function(t,e,i){t.apply(o,n.concat([i]))},t)});return t.length?i.apply(this,t):i})}function A(n){return E(function(t){var e=t.pop();t.push(function(){var t=arguments;i?g.setImmediate(function(){e.apply(null,t)}):e.apply(null,t)});var i=!0;n.apply(this,t),i=!1})}"object"==typeof R&&"function"==typeof R.nextTick?g.nextTick=R.nextTick:g.nextTick=h,g.setImmediate=u?h:g.nextTick,g.forEach=g.each=function(t,e,i){return g.eachOf(t,p(e),i)},g.forEachSeries=g.eachSeries=function(t,e,i){return g.eachOfSeries(t,p(e),i)},g.forEachLimit=g.eachLimit=function(t,e,i,n){return m(e)(t,p(i),n)},g.forEachOf=g.eachOf=function(t,e,i){i=C(i||b);for(var n,o=d(t=t||[]),s=0;null!=(n=o());)s+=1,e(t[n],n,a(c));function c(t){s--,t?i(t):null===n&&s<=0&&i(null)}0===s&&i(null)},g.forEachOfSeries=g.eachOfSeries=function(t,n,o){o=C(o||b);var s=d(t=t||[]),c=s();!function e(){var i=!0;if(null===c)return o(null);n(t[c],c,a(function(t){if(t)o(t);else{if(null===(c=s()))return o(null);i?g.setImmediate(e):e()}})),i=!1}()},g.forEachOfLimit=g.eachOfLimit=function(t,e,i,n){m(e)(t,i,n)},g.map=f(x),g.mapSeries=_(x),g.mapLimit=T(x),g.inject=g.foldl=g.reduce=function(t,n,o,e){g.eachOfSeries(t,function(t,e,i){o(n,t,function(t,e){n=e,i(t)})},function(t){e(t,n)})},g.foldr=g.reduceRight=function(t,e,i,n){var o=l(t,r).reverse();g.reduce(o,e,i,n)},g.transform=function(t,n,o,e){3===arguments.length&&(e=o,o=n,n=y(t)?[]:{}),g.eachOf(t,function(t,e,i){o(n,t,e,i)},function(t){e(t,n)})},g.select=g.filter=f(w),g.selectLimit=g.filterLimit=T(w),g.selectSeries=g.filterSeries=_(w),g.reject=f(D),g.rejectLimit=T(D),g.rejectSeries=_(D),g.any=g.some=I(g.eachOf,e,r),g.someLimit=I(g.eachOfLimit,e,r),g.all=g.every=I(g.eachOf,i,i),g.everyLimit=I(g.eachOfLimit,i,i),g.detect=I(g.eachOf,r,O),g.detectSeries=I(g.eachOfSeries,r,O),g.detectLimit=I(g.eachOfLimit,r,O),g.sortBy=function(t,e,i){function n(t,e){var i=t.criteria,n=e.criteria;return i<n?-1:n<i?1:0}g.map(t,function(i,n){e(i,function(t,e){t?n(t):n(null,{value:i,criteria:e})})},function(t,e){if(t)return i(t);i(null,l(e.sort(n),function(t){return t.value}))})},g.auto=function(p,r,l){"function"==typeof r&&(l=r,r=null),l=C(l||b);var t=k(p),e=t.length;if(!e)return l(null);r=r||e;var a={},d=0,u=!1,h=[];function m(t){h.unshift(t)}function f(){e--,v(h.slice(0),function(t){t()})}m(function(){e||l(null,a)}),v(t,function(s){if(!u){for(var t,i=y(p[s])?p[s]:[p[s]],n=E(function(t,e){if(d--,e.length<=1&&(e=e[0]),t){var i={};o=function(t,e){i[e]=t},v(k(n=a),function(t){o(n[t],t)}),i[s]=e,u=!0,l(t,i)}else a[s]=e,g.setImmediate(f);var n,o}),e=i.slice(0,i.length-1),o=e.length;o--;){if(!(t=p[e[o]]))throw new Error("Has nonexistent dependency in "+e.join(", "));if(y(t)&&0<=$(t,s))throw new Error("Has cyclic dependencies")}c()?(d++,i[i.length-1](n,a)):m(function t(){c()&&(d++,0<=(e=$(h,t))&&h.splice(e,1),i[i.length-1](n,a));var e})}function c(){return d<r&&(n=function(t,e){return t&&a.hasOwnProperty(e)},o=!0,v(e,function(t,e,i){o=n(o,t,e,i)}),o)&&!a.hasOwnProperty(s);var n,o}})},g.retry=function(t,e,i){var s=[],c={times:5,interval:0};var n=arguments.length;if(n<1||3<n)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function o(i,e){function t(t,n){return function(i){t(function(t,e){i(!t||n,{err:t,result:e})},e)}}function n(e){return function(t){setTimeout(function(){t(null)},e)}}for(;c.times;){var o=!--c.times;s.push(t(c.task,o)),!o&&0<c.interval&&s.push(n(c.interval))}g.series(s,function(t,e){e=e[e.length-1],(i||c.callback)(e.err,e.result)})}return n<=2&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||5;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||5,t.interval=parseInt(e.interval,10)||0}}(c,t),c.callback=i,c.task=e,c.callback?o():o},g.waterfall=function(t,s){if(s=C(s||b),!y(t)){var e=new Error("First argument to waterfall must be an array of functions");return s(e)}if(!t.length)return s();!function n(o){return E(function(t,e){if(t)s.apply(null,[t].concat(e));else{var i=o.next();i?e.push(n(i)):e.push(s),A(o).apply(null,e)}})}(g.iterator(t))()},g.parallel=function(t,e){S(g.eachOf,t,e)},g.parallelLimit=function(t,e,i){S(m(e),t,i)},g.series=function(t,e){S(g.eachOfSeries,t,e)},g.iterator=function(n){return function t(e){function i(){return n.length&&n[e].apply(null,arguments),i.next()}return i.next=function(){return e<n.length-1?t(e+1):null},i}(0)},g.apply=E(function(e,i){return E(function(t){return e.apply(null,i.concat(t))})}),g.concat=f(P),g.concatSeries=_(P),g.whilst=function(i,n,o){if(o=o||b,i()){var s=E(function(t,e){t?o(t):i.apply(this,e)?n(s):o.apply(null,[null].concat(e))});n(s)}else o(null)},g.doWhilst=function(t,e,i){var n=0;return g.whilst(function(){return++n<=1||e.apply(this,arguments)},t,i)},g.until=function(t,e,i){return g.whilst(function(){return!t.apply(this,arguments)},e,i)},g.doUntil=function(t,e,i){return g.doWhilst(t,function(){return!e.apply(this,arguments)},i)},g.during=function(i,n,o){o=o||b;var s=E(function(t,e){t?o(t):(e.push(c),i.apply(this,e))}),c=function(t,e){t?o(t):e?n(s):o(null)};i(c)},g.doDuring=function(t,e,i){var n=0;g.during(function(t){n++<1?t(null,!0):e.apply(this,arguments)},t,i)},g.queue=function(i,t){return L(function(t,e){i(t[0],e)},t,1)},g.priorityQueue=function(t,e){function s(t,e){return t.priority-e.priority}function n(i,t,n,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(i.started=!0,y(t)||(t=[t]),0===t.length)return g.setImmediate(function(){i.drain()});v(t,function(t){var e={data:t,priority:n,callback:"function"==typeof o?o:b};i.tasks.splice(function(t,e,i){for(var n=-1,o=t.length-1;n<o;){var s=n+(o-n+1>>>1);0<=i(e,t[s])?n=s:o=s-1}return n}(i.tasks,e,s)+1,0,e),i.tasks.length===i.concurrency&&i.saturated(),g.setImmediate(i.process)})}var o=g.queue(t,e);return o.push=function(t,e,i){n(o,t,e,i)},delete o.unshift,o},g.cargo=function(t,e){return L(t,1,e)},g.log=M("log"),g.dir=M("dir"),g.memoize=function(i,n){var s={},c={},p=Object.prototype.hasOwnProperty;n=n||r;var t=E(function(t){var e=t.pop(),o=n.apply(null,t);p.call(s,o)?g.setImmediate(function(){e.apply(null,s[o])}):p.call(c,o)?c[o].push(e):(c[o]=[e],i.apply(null,t.concat([E(function(t){s[o]=t;var e=c[o];delete c[o];for(var i=0,n=e.length;i<n;i++)e[i].apply(null,t)})])))});return t.memo=s,t.unmemoized=i,t},g.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},g.times=B(g.map),g.timesSeries=B(g.mapSeries),g.timesLimit=function(t,e,i,n){return g.mapLimit(s(t),e,i,n)},g.seq=function(){var e=arguments;return E(function(t){var n=this,i=t[t.length-1];"function"==typeof i?t.pop():i=b,g.reduce(e,t,function(t,e,i){e.apply(n,t.concat([E(function(t,e){i(t,e)})]))},function(t,e){i.apply(n,[t].concat(e))})})},g.compose=function(){return g.seq.apply(null,Array.prototype.reverse.call(arguments))},g.applyEach=j(g.eachOf),g.applyEachSeries=j(g.eachOfSeries),g.forever=function(t,e){var i=a(e||b),n=A(t);!function t(e){if(e)return i(e);n(t)}()},g.ensureAsync=A,g.constant=E(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),g.wrapSync=g.asyncify=function(s){return E(function(t){var e,i,n,o=t.pop();try{e=s.apply(this,t)}catch(t){return o(t)}("function"==(n=typeof(i=e))||"object"==n&&i)&&"function"==typeof e.then?e.then(function(t){o(null,t)}).catch(function(t){o(t.message?t:new Error(t))}):o(null,e)})},"object"==typeof F&&F.exports?F.exports=g:n.async=g}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:2,timers:3}],2:[function(t,e,i){var n,o,s=e.exports={};function c(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}function r(e){if(n===setTimeout)return setTimeout(e,0);if((n===c||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:c}catch(t){n=c}try{o="function"==typeof clearTimeout?clearTimeout:p}catch(t){o=p}}();var l,a=[],d=!1,u=-1;function h(){d&&l&&(d=!1,l.length?a=l.concat(a):u=-1,a.length&&m())}function m(){if(!d){var t=r(h);d=!0;for(var e=a.length;e;){for(l=a,a=[];++u<e;)l&&l[u].run();u=-1,e=a.length}l=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===p||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.push(new f(t,e)),1!==a.length||d||r(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}],3:[function(r,t,l){(function(t,e){var n=r("process/browser.js").nextTick,i=Function.prototype.apply,o=Array.prototype.slice,s={},c=0;function p(t,e){this._id=t,this._clearFn=e}l.setTimeout=function(){return new p(i.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new p(i.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(t){t.close()},p.prototype.unref=p.prototype.ref=function(){},p.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},l.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},l._unrefActive=l.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;0<=e&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},l.setImmediate="function"==typeof t?t:function(t){var e=c++,i=!(arguments.length<2)&&o.call(arguments,1);return s[e]=!0,n(function(){s[e]&&(i?t.apply(null,i):t.call(null),l.clearImmediate(e))}),e},l.clearImmediate="function"==typeof e?e:function(t){delete s[t]}}).call(this,r("timers").setImmediate,r("timers").clearImmediate)},{"process/browser.js":2,timers:3}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ChecklistDraggEvent="onChecklistDrag";var s=function(){this.index=0,this.dragId=0,this.isChanged=!1},n={bindings:{ngDisabled:"<?",pipChanged:"=?",pipDraggable:"<?",pipOptions:"=",pipScrollContainer:"<?",pipRebind:"<?"},templateUrl:"checklist_edit/ChecklistEdit.html",controller:(o.$inject=["$element","$timeout","$document","$rootScope"],o.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&(t.pipOptions&&t.pipOptions.currentValue&&(angular.equals(this.pipOptions,t.pipOptions.currentValue)||(this.selected.isChanged?this.selected.isChanged=!1:this.generateList(t.pipOptions.currentValue))),t.pipDraggable&&t.pipDraggable.currentValue&&(this.pipDraggable=t.pipDraggable.currentValue))},o.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.getCaret=function(t){if(t.selectionStart)return t.selectionStart;if(this.$document.selection){t.focus();var e=this.$document.selection.createRange();if(null==e)return 0;var i=t.createTextRange(),n=i.duplicate();return i.moveToBookmark(e.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length}return 0},o.prototype.setSelectionRange=function(t,e,i){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,i);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}},o.prototype.setCaretToPos=function(t,e){this.setSelectionRange(t,e,e)},o.prototype.addItem=function(t,e){var i=this.getNewItem(t,!1);-1<e&&(this.selected.index=e),this.checklistContent.length<2?this.checklistContent.unshift(i):this.checklistContent.splice(this.selected.index+1,0,i),this.selected.index+=1,this.setFocus(this.selected.index),this._debounceChange()},o.prototype.updateContents=function(){this.selected.isChanged=!0;var e=[];_.each(this.checklistContent,function(t){t.empty||e.push({checked:t.checked,text:t.text})}),this.pipOptions=e},o.prototype.setFocus=function(e,i){var n=this;-1<e&&setTimeout(function(){var t=angular.element("#check-item-text-"+n.selected.id+"-"+e);t&&(t.focus(),void 0!==i&&t[0]&&n.setCaretToPos(t[0],i))},50)},o.prototype.getNewItem=function(t,e){return{checked:!1,text:t||"",empty:e}},o.prototype.now=function(){return+new Date},o.prototype.clearList=function(){this.selected.index=0,this.checklistContent=[],this.checklistContent.push(this.getNewItem("",!0))},o.prototype.generateList=function(t){var e=this;!t||t.length<1?this.clearList():(this.checklistContent=[],_.each(t,function(t){e.checklistContent.push(t)}),this.checklistContent.push(this.getNewItem("",!0)))},o.prototype.setWidth100=function(){var t=angular.element("#check-item-"+ +this.selected.id+"-"+this.selected.index);t.css("width","none"),t.css("max-width","none")},o.prototype.setWidth=function(){if(!this.isWidth){var t=angular.element("#check-item-empty-"+this.selected.id).width(),e=angular.element("#check-item-"+this.selected.id+"-"+this.selected.index);e&&(e.css("width",t+"px"),e.css("max-width",t+"px"))}},o.prototype.onItemFocus=function(t){this.ngDisabled||(this.selected.index=t)},o.prototype.isSelectedItem=function(t){var e;try{e=this.checklistContent[t].empty}catch(t){e=!0}return this.selected.index==t&&this.pipDraggable&&!e},o.prototype.onAddItem=function(){this.addItem("",this.selected.index-1)},o.prototype.onChangeItem=function(t){-1<t&&this.checklistContent[t]&&this.checklistContent[t].empty&&this.checklistContent[t].empty&&(this.checklistContent[t].empty=!1,this.checklistContent.push(this.getNewItem("",!0))),this._debounceChange()},o.prototype.onClick=function(t,e){this.ngDisabled||(this.selected.index=e)},o.prototype.onTextAreaClick=function(t,e){this.ngDisabled||(this.selected.index=e)},o.prototype.onDropComplete=function(t,e,i,n){if(this.selected.id==n&&this.selected.drag){var o=t,s=this.selected.index,c=_.cloneDeep(this.checklistContent);if(0!=s||1!=t){if(o<s){o>c.length-1&&(o=c.length-1);for(var p=0;p<s-o;p++)c[s-p]=c[s-p-1];c[o]=e}if(s<o){--o;for(var r=0;r<o-s;r++)c[s+r]=c[s+r+1];c[o]=e}this.selected.index=o}this.checklistContent=c,this._debounceChange()}},o.prototype.onMove=function(){this.setWidth(),this.isWidth=!0},o.prototype.onStop=function(t){var e=this;this.$timeout(function(){e.selected.drag=e.selected.dragInit,e.selected.dragId=0},50),this.isWidth&&(this.setWidth100(),this.isWidth=!1)},o.prototype.onStart=function(t){this.selected.isChanged=!0,t&&t!=this.selected.dragId&&(this.selected.drag=!1)},o.prototype.onDownDragg=function(t){this.pipDraggable&&2<this.checklistContent.length&&!t.empty&&(this.$rootScope.$broadcast(i.ChecklistDraggEvent),this.selected.dragId=this.selected.id)},o.prototype.onDeleteItem=function(t,e){if(1==this.checklistContent.length)this.checklistContent[0].text="",this.checklistContent[0].checked=!1,this.checklistContent[0].empty=!0,this.selected.index=0;else{if(!(0<=t&&t<=this.checklistContent.length))return;this.checklistContent.splice(t,1)}this.selected.index>=this.checklistContent.length&&(this.selected.index=this.checklistContent.length-1),this.setFocus(this.selected.index,0),this._debounceChange()},o.prototype.onChecked=function(t){this._debounceChange()},o.prototype.onChecklistChange=function(){var t=this;this.updateContents(),this.pipChanged&&this.$timeout(function(){t.pipChanged(t.pipOptions)},0)},o.prototype.onTextareaKeyDown=function(t,e,i){if(!this.ngDisabled&&-1!=this.selected.index){var n,o;if(t&&t.target&&(o=this.getCaret(t.target),void 0!==t.target.value&&(n=t.target.value.length)),0<this.selected.index&&""!=i.text&&0==o&&8==t.keyCode&&!t.ctrlKey&&!t.shiftKey){if(!i.empty){var s=this.checklistContent[this.selected.index-1].text.length;this.checklistContent[this.selected.index-1].text=this.checklistContent[this.selected.index-1].text+i.text,--this.selected.index,this.checklistContent.splice(this.selected.index+1,1),this._debounceChange(),this.setFocus(this.selected.index,s)}return t&&t.stopPropagation(),!1}if(!(""!=i.text||8!=t.keyCode&&46!=t.keyCode||t.ctrlKey||t.shiftKey))return i.empty||this.onDeleteItem(e,i),t&&t.stopPropagation(),!1;if(13!=t.keyCode&&45!=t.keyCode||t.ctrlKey||t.shiftKey)return 0!==o&&o!=n||!(1<this.checklistContent.length)||38!=t.keyCode||t.ctrlKey||t.shiftKey?0!==o&&o!=n||!(1<this.checklistContent.length)||40!=t.keyCode||t.ctrlKey||t.shiftKey?i.empty||46!=t.keyCode||!t.ctrlKey||t.shiftKey?32==t.keyCode&&t.ctrlKey&&!t.shiftKey?(t&&t.stopPropagation(),t&&t.preventDefault(),i&&(i.checked=!i.checked,this._debounceChange()),!1):void 0:(t&&t.stopPropagation(),t&&t.preventDefault(),this.onDeleteItem(e,i),!1):(t&&t.stopPropagation(),t&&t.preventDefault(),void 0!==o&&void 0!==n&&o==n?(this.selected.index>=this.checklistContent.length-1?this.selected.index=0:this.selected.index+=1,this.setFocus(this.selected.index,0)):this.setFocus(this.selected.index,n),!1):(t&&t.stopPropagation(),t&&t.preventDefault(),void 0!==o&&void 0!==n&&0==o?(s=(0==this.selected.index?this.selected.index=this.checklistContent.length-1:--this.selected.index,this.checklistContent[this.selected.index].text.length),this.setFocus(this.selected.index,s)):this.setFocus(this.selected.index,0),!1);if(void 0!==o&&0==o)return 0<this.selected.index?this.addItem("",this.selected.index-1):(this.selected.index=-1,this.addItem("",-1)),t&&t.stopPropagation(),t&&t.preventDefault(),!1;if(n&&o&&n==o)return i.empty||this.addItem("",this.selected.index),t&&t.stopPropagation(),t&&t.preventDefault(),!1;if(n&&o&&o<n){var c,p;if(!i.empty)c=i.text.substring(0,o),p=i.text.substring(o),i.text=c,this.addItem(p,this.selected.index),this.setFocus(this.selected.index,0);return t&&t.stopPropagation(),t&&t.preventDefault(),!1}return t&&t.preventDefault(),!1}},o)};function o(t,e,i,n){var o=this;this.$element=t,this.$timeout=e,this.$document=i,this.$rootScope=n,t.addClass("pip-checklist-edit"),this.pipOptions&&_.isArray(this.pipOptions)||(this.pipOptions=[]),this.selected=new s,this.selected.drag=this.pipDraggable,this.selected.dragInit=this.pipDraggable,this.selected.id=this.now(),this.generateList(this.pipOptions),this._debounceChange=_.debounce(function(){o.onChecklistChange()},200)}angular.module("pipChecklistEdit",["pipComposite.Templates","pipBehaviors"]).component("pipChecklistEdit",n)},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={bindings:{ngDisabled:"<?",pipChanged:"=?",pipOptions:"=",pipRebind:"<?"},templateUrl:"checklist_view/ChecklistView.html",controller:(o.$inject=["$element"],o.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&t.pipOptions&&t.pipOptions.currentValue&&(angular.equals(this.pipOptions,t.pipOptions.currentValue)||(this.isChanged?this.isChanged=!1:this.pipOptions=t.pipOptions.currentValue))},o.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},o.prototype.onChecklistChange=function(){this.isChanged=!0,this.pipChanged&&this.pipChanged(this.pipOptions)},o.prototype.onClick=function(t,e){t&&t.stopPropagation(),this.ngDisabled||this.onChecklistChange()},o)};function o(t){this.$element=t,this.isChanged=!1,this.pipOptions&&_.isArray(this.pipOptions)||(this.pipOptions=[]),t.addClass("pip-checklist-view")}angular.module("pipChecklistView",["pipComposite.Templates"]).component("pipChecklistView",n)},{}],6:[function(t,e,p){"use strict";var n,i=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(p,"__esModule",{value:!0});var r=t("../checklist_edit/ChecklistEdit"),l=t("../utilities/CompositeFocused"),o=t("../data"),a=t("async");p.CompositeEmptyEvent="pipCompositeNotEmpty",p.CompositeAddItemEvent="pipAddContent",p.CompositeNotEmptyEvent="pipCompositeNotEmpty";function s(){}p.CompositeAddItem=s;function c(t){t&&(t.setTranslations("en",{COMPOSITE_TITLE:"What's on your mind?",COMPOSITE_PLACEHOLDER:"Type text ...",COMPOSITE_START_TIME:"Start time",COMPOSITE_END_TIME:"End time"}),t.setTranslations("ru",{COMPOSITE_TITLE:"Что у вас на уме?",COMPOSITE_PLACEHOLDER:"Введите текст ...",COMPOSITE_START_TIME:"Время начала",COMPOSITE_END_TIME:"Время окончания"}))}c.$inject=["pipTranslate"];function d(){}p.CompositeControl=d;var u,h=(u=o.ContentBlock,i(m,u),m);function m(){return null!==u&&u.apply(this,arguments)||this}p.CompositeContent=h;var f=function(){};f.Text="text",f.Pictures="pictures",f.Checklist="checklist",f.Documents="documents",f.Location="location",f.Time="time",f.SecondaryBlock=["checklist","documents","location","time"],f.PrimaryBlock=["text","pictures"],f.All=["text","pictures","checklist","documents","location","time"],p.CompositeBlockTypes=f;var g=function(){this.index=0,this.drag=!0,this.dragId=0,this.isChanged=!1},b={bindings:{ngDisabled:"<?",pipChanged:"=?",pipCreated:"&?",pipContents:"=?",compositeId:"<?pipCompositeId",pipCompositePlaceholder:"<?",pipScrollContainer:"<?",addedContent:"<?pipAddedContent",pipRebind:"<?"},templateUrl:"composite_edit/CompositeEdit.html",controller:(C.$inject=["$q","$element","$timeout","$document","$rootScope","pipTranslate"],C.prototype.abortContent=function(){_.each(this.compositeContent,function(t){t.pictures&&t.pictures.abort?t.pictures.abort():t.documents&&t.documents.abort&&t.documents.abort()})},C.prototype.getPicIdsArray=function(t){var e=[];return _.each(t,function(t){t.id&&e.push(t.id)}),e},C.prototype.saveContent=function(i,n,o){var s,c=this;s=_.cloneDeep(this.compositeContent);var p=null;a.eachOf(this.compositeContent,function(e,t,i){e.pictures&&e.pictures.save?e.pictures.save(function(t){delete e.picIds,e.pic_ids=c.getPicIdsArray(t),i()},function(t){p=p||t,o?i(t):i()}):e.documents&&e.documents.save?e.documents.save(function(t){e.docs=t,i()},function(t){p=p||t,o?i(t):i()}):i()},function(t,e){t||p?(o&&c.abortContent(),c.compositeContent=s,n&&n(t)):(c.onCompositeChange(),i&&i(c.pipContents))})},C.prototype.$onDestroy=function(){angular.isFunction(this.cleanupCompositeEvent)&&this.cleanupCompositeEvent(),angular.isFunction(this.cleanupChecklistDraggEvent)&&this.cleanupChecklistDraggEvent(),angular.isFunction(this.cleanupCompositeFocusedEvent)&&this.cleanupCompositeFocusedEvent()},C.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue,this.pipRebind&&t.pipContents&&_.isArray(t.pipContents.currentValue)&&(!this.selected.isChanged||this.pipContents&&this.pipContents.length!=this.compositeContent.length)&&(this.generateList(this.pipContents),this.selected.isChanged=!1)),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue),t.pipCompositePlaceholder&&t.pipCompositePlaceholder.currentValue!==t.pipCompositePlaceholder.previousValue&&(this.pipCompositePlaceholder=t.pipCompositePlaceholder.currentValue,this.setPlaceholder())},C.prototype.executeCallback=function(){this.pipCreated&&this.pipCreated({event:this.control})},C.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},C.prototype.getEmptyItem=function(){return{empty:!0,id:this.getId(),type:"text",text:"",docs:[],pic_ids:[],loc_pos:null,loc_name:"",start:null,end:null,checklist:[]}},C.prototype.setPlaceholder=function(){this.compositePlaceholder=void 0===this.pipCompositePlaceholder||null===this.pipCompositePlaceholder?this.pipTranslate.translate(this.defaultPlaceholder):this.pipTranslate.translate(this.pipCompositePlaceholder)},C.prototype.addItem=function(t,e){if(!(_.indexOf(this.CONTENT_TYPES,t)<0)){var i={id:this.getId(),type:t,text:"text"==t?e:"",docs:"documents"==t&&e?e:[],pic_ids:"pictures"==t&&e?e:[],loc_pos:"location"==t&&e?e.loc_pos:null,loc_name:"location"==t&&e?e.loc_name:"",start:"time"==t&&e?e.start:null,end:"time"==t&&e?e.end:null,checklist:"checklist"==t&&e?e:[]},n=_.findIndex(this.compositeContent,{id:this.selected.index});n=n<0?0:n,1==this.compositeContent.length&&this.compositeContent[0].empty?this.compositeContent[0]=i:(this.compositeContent.splice(n+1,0,i),n+=1),this.selected.index=i.id,this.onSelect(),setTimeout(this.scrollTo(this.pipScrollContainer,"#composite-item-"+this.selected.id+"-"+n),1e3),this.isFirst=!1,this.setToolbar(),this._debounceChange()}},C.prototype.getId=function(){var e=-1;return _.each(this.compositeContent,function(t){e<t.id&&(e=t.id)}),e+1},C.prototype.scrollTo=function(e,i){e&&i&&setTimeout(function(){if($(i).position()&&!(Math.abs($(e).scrollTop()-$(i).position().top)<20)){var t=$(e).scrollTop()+($(i).position().top-20);$(e).animate({scrollTop:t+"px"},300)}},100)},C.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},C.prototype.generateList=function(t){var e=this;!t||t.length<1?this.clearList():(this.compositeContent=[],_.each(t,function(t){t.id=e.getId(),t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,e.compositeContent.push(t)}),this.isFirst=!1,this.setToolbar())},C.prototype.setToolbar=function(){2<this.compositeContent.length||this.$rootScope.$emit(p.CompositeNotEmptyEvent,!this.isFirst)},C.prototype.clearList=function(){this.compositeContent=[],this.compositeContent.push(this.getEmptyItem()),this.isFirst=!0},C.prototype.now=function(){return+new Date},C.prototype.updateContents=function(){this.selected.isChanged=!0,this.pipContents=this.compositeContent},C.prototype.getParentIndex=function(t){if(t.length<1)return null;var e=t.parent();if(e[0]&&e[0].id&&-1<e[0].id.indexOf("composite-item-"+this.selected.id)){var i=e[0].id.split("-");return parseInt(i[i.length-1],10)}return this.getParentIndex(e)},C.prototype.isActiveChecklist=function(t){return t.id==this.selected.id},C.prototype.onKeyUp=function(t){var i=this;9==t.keyCode&&this.$timeout(function(){var t=angular.element(i.$document[0].activeElement),e=i.getParentIndex(t);null!=e&&(i.selected.index=e),i.selected.index=i.compositeContent[e].id},50)},C.prototype.onKeyDown=function(t,e,i){this.ngDisabled||i&&!i.empty&&46==t.keyCode&&!t.ctrlKey&&t.shiftKey&&(t&&(t.stopPropagation(),t.preventDefault()),-1<e&&this.onDeleteItem(e))},C.prototype.onCompositeChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},C.prototype.onDeleteItem=function(t){t<0||0==this.compositeContent.length||(1==this.compositeContent.length?(this.compositeContent[0]=this.getEmptyItem(),this.selected.index=this.compositeContent[0].id,this.onSelect(0),this.isFirst=!0,this.setToolbar()):(0<=t&&t<this.compositeContent.length&&this.compositeContent.splice(t,1),t==this.compositeContent.length?this.selected.index=this.compositeContent[this.compositeContent.length-1].id:this.selected.index=this.compositeContent[t].id,this.onSelect()),this.setToolbar(),this._debounceChange())},C.prototype.onContentChange=function(t){t&&t.empty&&t.text&&(t.empty=!1,this.isFirst=!1,this.setToolbar()),this.ngDisabled||this._debounceChange()},C.prototype.isSelectedSection=function(t,e){return this.selected.index==e.id&&!e.empty},C.prototype.onDraggEnd=function(){this.selected.drag=!0},C.prototype.onStart=function(t){t&&t!=this.selected.dragId&&(this.selected.drag=!1)},C.prototype.onStop=function(t){var e=this;this.$timeout(function(){e.selected.drag=!0,e.selected.dragId=0},500)},C.prototype.onDownDragg=function(t,e){this.ngDisabled||(this.selected.dragId=this.selected.id,this.selected.drag=!0,this.selected.index=e.id)},C.prototype.onClick=function(t,e,i){this.ngDisabled||(this.selected.event="onClick",t&&t.target&&t.target.tagName&&("INPUT"==t.target.tagName||"TEXTAREA"==t.target.tagName)?this.selected.index=i.id:this.selected.index==i.id&&"checklist"==i.type&&0<i.checklist.length||this.selected.index==i.id&&"location"==i.type||(this.selected.index=i.id,this.onSelect()))},C.prototype.onDropComplete=function(t,e,i,n){if(n==this.selected.id&&e&&e.type){var o,s=t,c=_.findIndex(this.compositeContent,{id:e.id});if(0!=c||1!=t){if(s<c){for(s>this.compositeContent.length-1&&(s=this.compositeContent.length-1),o=0;o<c-s;o++)this.compositeContent[c-o]=this.compositeContent[c-o-1];this.compositeContent[s]=e}if(c<s){for(--s,o=0;o<s-c;o++)this.compositeContent[c+o]=this.compositeContent[c+o+1];this.compositeContent[s]=e}this.selected.index=this.compositeContent[s].id}this.onSelect(),this._debounceChange()}else this.compositeContent=_.cloneDeep(this.pipContents)},C.prototype.onSelect=function(t){var e=this;if(!((t=t||_.findIndex(this.compositeContent,{id:this.selected.index}))<0)){var i,n=this.compositeContent[t];if(!_.isEmpty(n))switch(n.type){case"pictures":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" button.pip-picture-upload"))&&!i.is(":focus")&&i.focus()},50);break;case"documents":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" button.pip-document-upload"))&&!i.is(":focus")&&i.focus()},50);break;case"location":setTimeout(function(){(i=angular.element("#composite-item-"+e.selected.id+"-"+t+" .pip-location-empty  button"))&&!i.is(":focus")&&i.focus()},50)}}},C)};function C(t,e,i,n,o,s){var c=this;this.$q=t,this.$element=e,this.$timeout=i,this.$document=n,this.$rootScope=o,this.pipTranslate=s,this.defaultPlaceholder="COMPOSITE_PLACEHOLDER",this.CONTENT_TYPES=f.All,this.selected=new g,this.selected.id=this.now(),e.addClass("pip-composite-edit"),this.generateList(this.pipContents),this.setPlaceholder(),this.control={save:function(t,e){c.saveContent(t,e)},abort:function(){c.abortContent()},error:null},this.executeCallback(),this.cleanupCompositeEvent=this.$rootScope.$on(p.CompositeAddItemEvent,function(t,e){(!c.compositeId||e.id&&e.id==c.compositeId)&&c.addItem(e.type)}),this.cleanupChecklistDraggEvent=this.$rootScope.$on(r.ChecklistDraggEvent,function(){c.selected.drag=!1,c.$timeout(function(){c.selected.drag=!1},0)}),this.cleanupCompositeFocusedEvent=this.$rootScope.$on(l.CompositeFocusedEvent,function(){c.isFirst&&c.$timeout(function(){var t=angular.element("#composite-item-text-"+c.selected.id+"-0");t&&!t.is(":focus")&&t.focus()},50)}),this._debounceChange=_.debounce(function(){c.onCompositeChange()},200)}angular.module("pipCompositeEdit",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates"]).run(c).component("pipCompositeEdit",b)},{"../checklist_edit/ChecklistEdit":4,"../data":15,"../utilities/CompositeFocused":22,async:1}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("../composite_edit/CompositeEdit"),n={bindings:{pipContents:"<?",pipChecklistSize:"<?",pipTextSize:"<?",pipPrimaryBlockLimit:"<?",pipSecondaryBlockLimit:"<?",pipSecondaryBlockTypes:"<?",pipRebind:"<?"},templateUrl:"composite_summary/CompositeSummary.html",controller:(s.$inject=["$element"],s.prototype.$onChanges=function(t){this.toBoolean(this.pipRebind)&&t.pipContents&&t.pipContents.currentValue&&(angular.equals(this.pipContents,t.pipContents.currentValue)||this.generateList(this.pipContents))},s.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},s.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},s.prototype.limitChecklist=function(t,i){if(i){var n={text:"...",checked:!1};_.each(t,function(t){if(t&&t.type==o.CompositeBlockTypes.Checklist){var e=t.checklist.length;t.checklist=_.take(t.checklist,i),i<e&&t.checklist.push(n)}})}},s.prototype.selectSummary=function(t){var e,i=this,n=[];return _.each(t,function(t){if(0<=i.pipPrimaryBlockLimit&&e>=i.pipPrimaryBlockLimit)return n;i.pipSecondaryBlockTypes.indexOf(t.type)<0&&(n.push(t),e+=1)}),n},s.prototype.selectSummarySecondary=function(t,e){for(var i,n=this.pipSecondaryBlockLimit<0?t.length:this.pipSecondaryBlockLimit,o=[];i<t.length&&!(-1<e.indexOf(t[i].type)&&(o.push(t[i]),o.length>=n));i++);return o},s.prototype.generateList=function(t){var e=this;if(!t||t.length<1)this.clearList();else{var i,n=_.cloneDeep(t),o=this.selectSummary(n);0==o.length&&(o=this.selectSummarySecondary(n,this.pipSecondaryBlockTypes)),this.limitChecklist(o,this.pipChecklistSize),_.each(o,function(t){t.id=i,t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,i++}),this.compositeContent=o}},s.prototype.clearList=function(){this.compositeContent=[]},s)};function s(t){this.$element=t,this.disableControl=!0,this.disabledChecklist=!0,t.addClass("pip-composite-summary"),this.pipChecklistSize=this.pipChecklistSize?this.pipChecklistSize:0,this.pipTextSize=this.pipTextSize?this.pipTextSize:0,this.pipPrimaryBlockLimit=void 0===this.pipPrimaryBlockLimit||null===this.pipPrimaryBlockLimit?-1:this.pipPrimaryBlockLimit,this.pipSecondaryBlockLimit=void 0===this.pipSecondaryBlockLimit||null===this.pipSecondaryBlockLimit?-1:this.pipSecondaryBlockLimit,this.pipSecondaryBlockTypes=this.pipSecondaryBlockTypes&&_.isArray(this.pipSecondaryBlockTypes)?this.pipSecondaryBlockTypes:o.CompositeBlockTypes.SecondaryBlock,this.generateList(this.pipContents)}angular.module("pipCompositeSummary",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates"]).component("pipCompositeSummary",n)},{"../composite_edit/CompositeEdit":6}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}var o=t("../composite_edit/CompositeEdit");i.CompositeAddItemEventParams=n;var s=function(){this.picture=!0,this.document=!0,this.location=!0,this.event=!0,this.checklist=!0,this.text=!0};i.CompositeToolbarButton=s;function c(t){t.translations("en",{TEXT:"Text",CHECKLIST:"Checklist",LOCATION:"Location",PICTURE:"Picture",TIME:"Time",DOCUMENT:"Document"}),t.translations("ru",{TEXT:"Текст",CHECKLIST:"Список",LOCATION:"Локация",PICTURE:"Изображение",TIME:"Время",DOCUMENT:"Document"})}c.$inject=["pipTranslateProvider"];var p={bindings:{ngDisabled:"<?",emptyState:"<?pipCompositeEmpty",pipToolbarButton:"=?",compositeId:"=?pipCompositeId"},templateUrl:"composite_toolbar/CompositeToolbar.html",controller:(r.$inject=["$rootScope","$element"],r.prototype.$onDestroy=function(){angular.isFunction(this.cleanupCompositeEvent)&&this.cleanupCompositeEvent()},r.prototype.$onChanges=function(t){t.pipToolbarButton&&t.pipToolbarButton.currentValue&&this.setOption()},r.prototype.toBoolean=function(t){return null!=t&&!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t)},r.prototype.onAddItem=function(t){var e={type:t,id:this.compositeId};this.$rootScope.$emit(o.CompositeAddItemEvent,e)},r.prototype.setOption=function(){_.assign(this.pipToolbarButton,this.pipToolbarButton),this.toolbarButton.text=!0},r)};function r(t,e){var i=this;this.$rootScope=t,this.$element=e,this.toolbarButton=new s,this.setOption(),e.addClass("pip-composite-toolbar"),this.cleanupCompositeEvent=this.$rootScope.$on(o.CompositeEmptyEvent,function(t,e){i.emptyState=!e})}angular.module("pipCompositeToolbar",["pipComposite.Templates"]).config(c).component("pipCompositeToolbar",p)},{"../composite_edit/CompositeEdit":6}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={bindings:{ngDisabled:"<?",pipDisabledChecklist:"<?",pipChanged:"=?",pipContents:"=?",pipRebind:"<?"},templateUrl:"composite_view/CompositeView.html",controller:(o.$inject=["$element","$attrs"],o.prototype.$onChanges=function(t){t.pipRebind&&t.pipRebind.currentValue!==t.pipRebind.previousValue&&(this.pipRebind=t.pipRebind.currentValue,this.pipRebind&&t.pipContents&&_.isArray(t.pipContents.currentValue)&&(!0===this.selected.isChanged?this.selected.isChanged=!1:this.generateList(t.pipContents.currentValue))),t.ngDisabled&&t.ngDisabled.currentValue!==t.ngDisabled.previousValue&&(this.ngDisabled=t.ngDisabled.currentValue),t.pipDisabledChecklist&&t.pipDisabledChecklist.currentValue!==t.pipDisabledChecklist.previousValue&&(this.pipDisabledChecklist=t.pipDisabledChecklist.currentValue)},o.prototype.getPicIds=function(t){var i=[];return _.each(t,function(t){var e={id:t};i.push(e)}),i},o.prototype.updateContents=function(){this.selected.isChanged=!0,this.pipContents=this.compositeContent},o.prototype.isDisabled=function(){return!0===this.pipDisabledChecklist||!0===this.ngDisabled},o.prototype.onContentChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},o.prototype.onCompositeChange=function(){this.updateContents(),this.pipChanged&&this.pipChanged(this.pipContents)},o.prototype.generateList=function(t){var e=this;if(!t||t.length<1)this.clearList();else{this.compositeContent=[];var i=0;_.each(t,function(t){if("object"!=typeof t||null==t)throw new Error("Error: content error!");t.id=i,t.picIds=t.pic_ids?e.getPicIds(t.pic_ids):null,i++,e.compositeContent.push(t)})}},o.prototype.clearList=function(){this.compositeContent=[]},o)};function o(t,e){this.$element=t,this.$attrs=e,this.selected={},t.addClass("pip-composite-view"),this.selected.isChanged=!1,this.pipContents=_.isArray(this.pipContents)?this.pipContents:[],this.generateList(this.pipContents)}angular.module("pipCompositeView",["pipDocuments","pipLocations","pipPictures","pipDates","pipComposite.Templates","pipEmbeddedView"]).component("pipCompositeView",n)},{}],10:[function(t,e,i){function n(n){return{restrict:"EA",scope:!1,templateUrl:"content_switch/ContentSwitch.html",link:function(t,e,i){new o(n,t,e,i)}}}var o=(s.$inject=["$parse","$scope","$element","$attrs"],s.prototype.scrollTo=function(e){var i=this;setTimeout(function(){if(!(Math.abs($(i.parentElement).scrollTop()-$(e).position().top)<20)){var t=$(i.parentElement).scrollTop()+($(e).position().top-20);$(i.parentElement).animate({scrollTop:t+"px"},300)}},100)},s.prototype.setOption=function(){null!==this.$scope.contentSwitchOption&&void 0!==this.$scope.contentSwitchOption?(this.$scope.showIconPicture=this.$scope.contentSwitchOption.picture?this.$scope.contentSwitchOption.picture:this.$scope.showIconPicture,this.$scope.showIconDocument=this.$scope.contentSwitchOption.document?this.$scope.contentSwitchOption.document:this.$scope.showIconDocument,this.$scope.showIconLocation=this.$scope.contentSwitchOption.location?this.$scope.contentSwitchOption.location:this.$scope.showIconLocation,this.$scope.showIconEvent=this.$scope.contentSwitchOption.event?this.$scope.contentSwitchOption.event:this.$scope.showIconEvent):(this.$scope.showIconPicture=!0,this.$scope.showIconDocument=!0,this.$scope.showIconLocation=!0,this.$scope.showIconEvent=!0)},s.prototype.onButtonClick=function(t){if(this.parentElement)switch(t){case"event":this.$scope.showEvent&&scrollTo(".event-edit");break;case"documents":this.$scope.showDocuments&&scrollTo(".pip-document-list-edit");break;case"pictures":this.$scope.showPictures&&scrollTo(".pip-picture-list-edit");break;case"location":this.$scope.showLocation&&scrollTo(".pip-location-edit")}},s);function s(t,e,i,n){this.$parse=t,this.$scope=e,this.$element=i,this.$attrs=n,this.parentElementNameGetter=t(n.pipParentElementName),this.parentElement=this.parentElementNameGetter(e),this.setOption()}n.$inject=["$parse"],angular.module("pipContentSwitch",["pipComposite.Templates"]).directive("pipContentSwitch",n)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.ChecklistItem=n},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(){}i.ContentBlock=n},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.Text="text",n.Checklist="checklist",n.Location="location",n.Time="time",n.Pictures="pictures",n.Documents="documents",n.Embedded="embedded",n.Custom="custom",i.ContentBlockType=n},{}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){};n.Youtube="youtube",n.Custom="custom",i.EmbeddedType=n},{}],15:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./Content"),t("./ChecklistItem"),t("./ContentBlockType"),n(t("./Content")),n(t("./ChecklistItem")),n(t("./ContentBlockType"))},{"./ChecklistItem":11,"./Content":12,"./ContentBlockType":13}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("../data/EmbeddedType"),n={embed_type:"=?pipEmbeddedType",embed_uri:"=?pipEmbeddedUri",onChange:"=pipChanged",ngDisabled:"&?ngDisabled"},s=(c.$inject=["$element","$scope","$state","pipMedia"],c.prototype.$onInit=function(){},c.prototype.$onChanges=function(t){console.log("$onChanges"),this.init()},c.prototype.$postLink=function(){console.log("postlink",this.$scope),this.form=this.$scope.embedded},c.prototype.init=function(){this.embed_type||(this.embed_type=o.EmbeddedType.Custom)},c.prototype.onChangeType=function(){console.log("onChangeType"),this.form.url.$error||this.onChange(this.embed_type,this.embed_uri)},c.prototype.onChangeUrl=function(){console.log("onChangeUrl"),this.onChange(this.embed_type,this.embed_uri)},c.prototype.isDisabled=function(){return!!this.ngDisabled&&this.ngDisabled()},c);function c(t,e,i,n){this.$element=t,this.$scope=e,this.$state=i,this.pipMedia=n,this.embeddedTypeCollection=[{title:"EMBEDDED_TYPE_CUSTOM",shortTitle:"EMBEDDED_TYPE_CUSTOM_SHORT",id:o.EmbeddedType.Custom},{title:"EMBEDDED_TYPE_YOUTUBE",shortTitle:"EMBEDDED_TYPE_YOUTUBE_SHORT",id:o.EmbeddedType.Youtube}],t.addClass("pip-embedded-edit"),this.init()}function p(t){t.translations("en",{EMBEDDED_TYPE_LABEL:"Embedded type",EMBEDDED_URL_LABEL:"Embedded uri",EMBEDDED_TYPE_HINT:"Enter uri of embedded resource",EMBEDDED_URL_ERROR:"Uri error",EMBEDDED_TYPE_CUSTOM:"Custom",EMBEDDED_TYPE_YOUTUBE:"Youtube",EMBEDDED_TYPE_CUSTOM_SHORT:"Custom",EMBEDDED_TYPE_YOUTUBE_SHORT:"Youtube"}),t.translations("ru",{EMBEDDED_TYPE_LABEL:"Тип встроенного ресурса",EMBEDDED_URL_LABEL:"Uri встроенного ресурса",EMBEDDED_TYPE_HINT:"Введите uri встроенного ресурса",EMBEDDED_URL_ERROR:"Неверный uri",EMBEDDED_TYPE_CUSTOM:"Другой",EMBEDDED_TYPE_YOUTUBE:"Youtube",EMBEDDED_TYPE_CUSTOM_SHORT:"Другой",EMBEDDED_TYPE_YOUTUBE_SHORT:"Youtube"})}p.$inject=["pipTranslateProvider"],angular.module("pipEmbeddedEdit",[]).component("pipEmbeddedEdit",{bindings:n,templateUrl:"embedded_edit/EmbeddedEdit.html",controller:s,controllerAs:"$ctrl"}).config(p)},{"../data/EmbeddedType":14}],17:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={embed_type:"=?pipEmbeddedType",embed_uri:"=?pipEmbeddedUri"},o=(s.$inject=["$element","pipMedia"],s.prototype.$onInit=function(){},s.prototype.$onChanges=function(t){console.log("$onChanges"),this.init()},s.prototype.init=function(){},s);function s(t,e){this.$element=t,this.pipMedia=e,t.addClass("pip-embedded-view"),this.init()}function c(t){t.translations("en",{}),t.translations("ru",{})}function p(t){t.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}p.$inject=["$sceDelegateProvider"],c.$inject=["pipTranslateProvider"],angular.module("pipEmbeddedView",[]).component("pipEmbeddedView",{bindings:n,templateUrl:"embedded_view/EmbeddedView.html",controller:o,controllerAs:"$ctrl"}).config(p).config(c)},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./checklist_edit/ChecklistEdit"),t("./checklist_view/ChecklistView"),t("./composite_edit/CompositeEdit"),t("./composite_summary/CompositeSummary"),t("./composite_toolbar/CompositeToolbar"),t("./composite_view/CompositeView"),t("./utilities/CompositeFocused"),t("./mobile_mouse"),t("./content_switch/ContentSwitch"),t("./embedded_edit/EmbeddedEdit"),t("./embedded_view/EmbeddedView"),t("./data"),angular.module("pipComposite",["pipContentSwitch","pipChecklistEdit","pipChecklistView","pipCompositeEdit","pipCompositeView","pipCompositeSummary","pipCompositeToolbar","pipCompositeFocused","pipMobileMouse","pipEmbeddedEdit","pipEmbeddedView"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./data"))},{"./checklist_edit/ChecklistEdit":4,"./checklist_view/ChecklistView":5,"./composite_edit/CompositeEdit":6,"./composite_summary/CompositeSummary":7,"./composite_toolbar/CompositeToolbar":8,"./composite_view/CompositeView":9,"./content_switch/ContentSwitch":10,"./data":15,"./embedded_edit/EmbeddedEdit":16,"./embedded_view/EmbeddedView":17,"./mobile_mouse":21,"./utilities/CompositeFocused":22}],19:[function(t,e,i){function n(e,t,i){t.bind("touchstart mousedown",function(t){e.$apply(i.pipMobileMousedown)})}angular.module("pipMobileMouse").directive("pipMobileMousedown",function(){return n})},{}],20:[function(t,e,i){function n(e,t,i){t.bind("touchend mouseup",function(t){e.$apply(i.pipMobileMouseup)})}angular.module("pipMobileMouse").directive("pipMobileMouseup",function(){return n})},{}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipMobileMouse",[]),t("./MobileMousedown"),t("./MobileMouseup")},{"./MobileMousedown":19,"./MobileMouseup":20}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CompositeFocusedEvent="focusedComposite";var n=(o.$inject=["$element","$rootScope"],o);function o(t,e){t.bind("touchstart mousedown",function(t){e.$broadcast(i.CompositeFocusedEvent)})}angular.module("pipCompositeFocused",[]).directive("pipCompositeFocused",function(){return{restrict:"A",scope:!1,controller:n}})},{}],23:[function(t,e,i){!function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("checklist_edit/ChecklistEdit.html",'<div ng-class="{\'pip-checklist-draggable\': $ctrl.selected.drag}" id="{{\'checklist-\' + $ctrl.selected.id}}"><div ng-repeat="item in $ctrl.checklistContent" ng-mousedown="$ctrl.onClick($event, $index)" class="pip-checklist-item" id="{{\'check-item-\' + $ctrl.selected.id + \'-\' + $index}}" pip-drag="$ctrl.checklistContent.length > 1 && $ctrl.selected.drag && !item.empty" pip-drag-data="item" pip-force-touch="true" pip-touch-delay="30" pip-drop="true" pip-drag-stop="$ctrl.onStop(selected.id)" pip-drag-start="$ctrl.onStart(selected.id)" pip-scroll-container="$ctrl.pipScrollContainer" pip-drop-success="$ctrl.onDropComplete($index, $data, $event, $ctrl.selected.id)"><div ng-class="{\'put_place\': $ctrl.selected.drag}"></div><div class="pip-checklist-item-body layout-row layout-align-start-start" pip-cancel-drag="true" ng-class="{ \'select-active-item\': $ctrl.isSelectedItem($index) }"><div class="pip-checklist-button" pip-cancel-drag="true"><md-button pip-drag-handle="" class="pip-icon-checklist-button md-icon-button no-ripple-container" aria-label="REARRANGE" tabindex="-1" pip-mobile-mousedown="$ctrl.onDownDragg(item)" pip-mobile-mouseup="$ctrl.onDraggEnd()" ng-if="$ctrl.pipDraggable && $ctrl.checklistContent.length > 2 && !item.empty" ng-class="$ctrl.checklistContent.length > 1 ? \'cursor-move\' : \'cursor-default\'" ng-disabled="$ctrl.ngDisabled"><md-icon class="text-grey" md-svg-icon="icons:vhandle"></md-icon></md-button></div><div class="pip-checklist-button" style="overflow: hidden" pip-cancel-drag="true"><div class="pip-checklist-button-container"><md-button class="pip-icon-checklist-button md-icon-button" ng-show="item.empty" ng-disabled="$ctrl.ngDisabled" md-ink-ripple="" ng-click="$ctrl.onAddItem()" tabindex="-1" aria-label="PLUS"><md-icon class="text-grey" md-svg-icon="icons:plus"></md-icon></md-button><md-checkbox ng-model="item.checked" ng-show="!item.empty" aria-label="COMPLETE" pip-cancel-drag="true" ng-focus="$ctrl.onItemFocus($index)" ng-change="$ctrl.onChecked(item)" ng-disabled="$ctrl.ngDisabled"></md-checkbox></div></div><div class="pip-checklist-text flex" pip-cancel-drag="true"><md-input-container md-no-float="" class="flex"><textarea ng-model="item.text" name="{{\'text\' + $index}}" aria-label="TEXT" class="pip-text-checkbox" ng-focus="$ctrl.onItemFocus($index)" ng-change="$ctrl.onChangeItem($index)" ng-keydown="$ctrl.onTextareaKeyDown($event, $index, item)" placeholder="{{::\'TEXT\' | translate}}" id="{{\'check-item-text-\' + selected.id + \'-\' + $index}}" ng-disabled="$ctrl.ngDisabled">\n                    </textarea></md-input-container></div><div class="pip-checklist-button" pip-cancel-drag="true"><md-button class="pip-icon-checklist-button md-icon-button" md-ink-ripple="" ng-click="$ctrl.onDeleteItem($index, item)" ng-disabled="$ctrl.ngDisabled" tabindex="-1" ng-focus="$ctrl.onItemFocus($index)" ng-show="$ctrl.isSelectedItem($index)" aria-label="DELETE-ITEM"><md-icon class="text-grey" md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div></div><div id="{{\'check-item-empty-\' + $ctrl.selected.id}}" class="pip-empty-text" pip-drag="false" pip-drop="true" pip-drop-success="$ctrl.onDropComplete($ctrl.checklistContent.length, $data, $event, $ctrl.selected.id)"><div ng-class="{\'put_place\': $ctrl.selected.drag}"></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("checklist_view/ChecklistView.html",'<div ng-repeat="item in $ctrl.pipOptions track by $index"><div class="pip-checklist-item layout-row layout-align-start-start"><div class="pip-checklist-icon"><md-checkbox ng-model="item.checked" ng-click="$ctrl.onClick($event, item)" aria-label="COMPLETE" ng-disabled="$ctrl.ngDisabled"></md-checkbox></div><div class="pip-checklist-text flex"><pip-markdown pip-text="item.text" pip-rebind="true" ng-disabled="true"></pip-markdown></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_edit/CompositeEdit.html",'<div class="divider-top"><div class="pip-composite-body" ng-show="$ctrl.compositeContent.length != 0" ng-class="{\'drag-active\': $ctrl.selected.drag}"><div class="pip-composite-item" ng-repeat="obj in $ctrl.compositeContent track by obj.id" ng-mousedown="$ctrl.onClick($event, $index, obj)" ng-class="{\'selected-content\': $ctrl.isSelectedSection($index, obj), \'composite-animate\': !obj.empty && $ctrl.compositeContent.length > 1}" ng-keyup="$ctrl.onKeyUp($event)" ng-keydown="$ctrl.onKeyDown($event, $index, obj)" pip-drag="$ctrl.compositeContent.length > 1 && $ctrl.selected.drag" pip-touch-delay="10" pip-drag-data="obj" pip-scroll-container="$ctrl.pipScrollContainer" pip-drop="true" pip-force-touch="true" pip-drag-stop="$ctrl.onStop($ctrl.selected.id)" pip-drag-start="$ctrl.onStart($ctrl.selected.id)" pip-drop-success="$ctrl.onDropComplete($index, $data, $event, $ctrl.selected.id)" id="{{\'composite-item-\' + $ctrl.selected.id + \'-\' + $index}}"><div class="putt_box"></div><div class="pip-section-header layout-row layout-align-start-center" ng-if="!obj.empty"><div class="w38"></div><md-button class="md-icon-button md-icon-button-little icon-rearrange-btn no-ripple-container rm8 cursor-move" ng-if="!$ctrl.ngDisabled && $ctrl.compositeContent.length > 1" pip-drag-handle="" pip-mobile-mousedown="$ctrl.onDownDragg($event, obj)" pip-mobile-mouseup="$ctrl.onDraggEnd()" tabindex="-1" aria-label="COMPOSITE-DRAGG" ng-hide="$ctrl.compositeContent.length == 1"><md-icon class="composite-icon cursor-move" md-svg-icon="icons:handle"></md-icon></md-button><div><md-button class="md-icon-button md-icon-button-little rm8" ng-click="$ctrl.onDeleteItem($index)" ng-disabled="$ctrl.ngDisabled" aria-label="COMPOSITE-DELETE"><md-icon class="composite-icon" md-svg-icon="icons:cross"></md-icon></md-button></div></div><div class="pip-section-content rp24-flex lp24-flex tp16 bp16" ng-if="obj.type == \'text\'" pip-cancel-drag="true"><md-input-container class="p0 m0 w-stretch" md-no-float=""><textarea ng-model="obj.text" aria-label="text" placeholder="{{ $ctrl.isFirst ? $ctrl.compositePlaceholder : \'TEXT\' | translate}}" id="{{\'composite-item-text-\' + $ctrl.selected.id + \'-\' + $index}}" ng-change="$ctrl.onContentChange(obj)" pip-cancel-drag="true" ng-disabled="$ctrl.ngDisabled">\n                            </textarea></md-input-container></div><div class="pip-section-content rp24-flex lp24-flex vp20" ng-if="obj.type == \'pictures\'" pip-cancel-drag="true"><pip-picture-list-edit class="w-stretch" pip-cancel-drag="true" pip-pictures="obj.picIds" pip-changed="$ctrl.onContentChange(obj)" pip-created="obj.pictures = $event.sender" pip-added-picture="$ctrl.addedContent" ng-disabled="$ctrl.ngDisabled"></pip-picture-list-edit></div><div class="pip-section-content rp24-flex lp24-flex vp20" ng-if="obj.type == \'documents\'" pip-cancel-drag="true"><pip-document-list-edit class="w-stretch" pip-documents="obj.docs" pip-cancel-drag="true" pip-changed="$ctrl.onContentChange(obj)" pip-created="obj.documents = $event.sender" pip-added-document="$ctrl.addedContent" ng-disabled="$ctrl.ngDisabled"></pip-document-list-edit></div><div class="pip-section-embedded rp24-flex lp24-flex vp20" ng-if="obj.type == \'embedded\'" pip-cancel-drag="true"><pip-embedded-edit pip-embedded-type="obj.embed_type" pip-embedded_uri="obj.embed_uri" pip-cancel-drag="true" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled"></pip-embedded-edit></div><div class="pip-section-content layout-row layout-align-start-center" ng-if="obj.type == \'checklist\'" pip-cancel-drag="true"><pip-checklist-edit pip-options="obj.checklist" pip-draggable="$ctrl.isActiveChecklist(obj)" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled" pip-scroll-container="$ctrl.pipScrollContainer" pip-rebind="true"></pip-checklist-edit></div><div class="pip-section-content vp20 rp24-flex lp24-flex" ng-if="obj.type == \'location\'" pip-cancel-drag="true"><pip-location-edit class="pip-location-attachments w-stretch" pip-location-name="obj.loc_name" pip-location-pos="obj.loc_pos" pip-cancel-drag="true" xxxpip-location-holder="$ctrl.pipLocationHolder" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled"></pip-location-edit></div><div class="pip-section-content bp16-flex rp24-flex lp24-flex tp20" ng-if="obj.type == \'time\'" pip-cancel-drag="true"><pip-time-range-edit class="w-stretch" pip-start-date="obj.start" pip-end-date="obj.end" xxxpip-size="$sizeGtSmall" pip-changed="$ctrl.onContentChange(obj)" ng-disabled="$ctrl.ngDisabled" pip-start-label="{{ \'COMPOSITE_START_TIME\' | translate }}" pip-end-label="{{ \'COMPOSITE_END_TIME\' | translate }}"></pip-time-range-edit></div></div><div class="pip-composite-item w-stretch" pip-drag="false" pip-drop="true" pip-drop-success="$ctrl.onDropComplete($ctrl.compositeContent.length, $data, $event, $ctrl.selected.id)" pip-drag-stop="$ctrl.onStop($ctrl.selected.id)" pip-drag-start="$ctrl.onStart($ctrl.selected.id)" id="{{\'pip-composite-last-\' + $ctrl.selected.id}}"><div class="putt_box"></div><div class="pip-section-content h24" style="border: 0px!important;"></div></div></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_summary/CompositeSummary.html",'<div ng-repeat="item in $ctrl.compositeContent track by $index"><div class="pip-composite-text" ng-if="item.type == \'text\' && item.text"><pip-markdown pip-text="item.text" pip-line-count="$ctrl.textSize" pip-rebind="true" ng-disabled="true"></pip-markdown></div><div ng-if="item.type == \'pictures\' && item.picIds && item.picIds.length > 0" ng-class="$ctrl.compositeContent[$index - 1].type != \'pictures\' ? $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm16 bm16\' : \'tm16 bm0\' : $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm8 bm16\' : \'tm8 bm0\'" class="pip-composite-pictures"><pip-collage pip-pictures="item.picIds" pip-unique-code="item.id" pip-multiple="true" pip-open="$ctrl.disableControl" pip-rebind="true" ng-disabled="$ctrl.disableControl"></pip-collage></div><div ng-if="item.type == \'documents\' && item.docs && item.docs.length > 0" class="pip-composite-documents layout-row flex"><pip-document-list class="flex" pip-documents="item.docs" pip-rebind="true" pip-document-icon="true" pip-collapse="true" ng-disabled="$ctrl.disableControl"></pip-document-list></div><div ng-if="item.type == \'checklist\' && item.checklist && item.checklist.length > 0" class="pip-composite-checklist"><pip-checklist-view pip-options="item.checklist" pip-changed="$ctrl.onContentChange()" pip-rebind="true" pip-collapse="true" ng-disabled="$ctrl.disabledChecklist"></pip-checklist-view></div><div class="pip-composite-location layout-row layout-align-start-center flex" ng-if="item.type == \'location\' && (item.loc_pos || item.loc_name)"><pip-location class="flex" pip-location-name="item.loc_name" pip-location-pos="item.loc_pos" pip-collapse="true" pip-show-location-icon="true" ng-disabled="$ctrl.disableControl" pip-rebind="true"></pip-location></div><div class="pip-composite-time layout-row layout-align-start-center flex" ng-if="item.type == \'time\' && (item.start || item.end)"><md-icon md-svg-icon="icons:time" class="rm24 lm0"></md-icon><pip-time-range pip-start-date="item.start" pip-end-date="item.end" pip-rebind="true" ng-disabled="$ctrl.disableControl"></pip-time-range></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_toolbar/CompositeToolbar.html",'<div class="layout-row layout-align-start-start flex"><md-button class="pip-composite-button" ng-if="!$ctrl.emptyState" ng-class="{ \'remove-item\': !$ctrl.emptyState , \'new-item\': !$ctrl.emptyState }" ng-click="$ctrl.onAddItem(\'text\');" aria-label="COMPOSITE-BUTTON-TEXT" ng-disabled="$ctrl.ngDisabled"><md-icon class="icon-text-block" md-svg-icon="icons:text"></md-icon><md-tooltip>{{::\'TEXT\'| translate}}</md-tooltip></md-button><md-button ng-if="$ctrl.toolbarButton.checklist" ng-click="$ctrl.onAddItem(\'checklist\')" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-CHECKLIST"><md-icon class="icon-checkbox-on" md-svg-icon="icons:checkbox-on"></md-icon><md-tooltip>{{::\'CHECKLIST\'| translate}}</md-tooltip></md-button><md-button ng-if="$ctrl.toolbarButton.picture" ng-click="$ctrl.onAddItem(\'pictures\')" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-PICTURES"><md-icon class="icon-camera" md-svg-icon="icons:camera"></md-icon><md-tooltip>{{::\'PICTURE\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'documents\')" ng-if="$ctrl.toolbarButton.document" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-DOCUMENTS"><md-icon class="icon-document" md-svg-icon="icons:document"></md-icon><md-tooltip>{{::\'DOCUMENT\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'location\')" ng-if="$ctrl.toolbarButton.location" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-LOCATIONS"><md-icon class="icon-location" md-svg-icon="icons:location"></md-icon><md-tooltip>{{::\'LOCATION\'| translate}}</md-tooltip></md-button><md-button ng-click="$ctrl.onAddItem(\'time\')" ng-if="$ctrl.toolbarButton.event" ng-disabled="$ctrl.ngDisabled" class="pip-composite-button" aria-label="COMPOSITE-BUTTON-TIME"><md-icon class="icon-time" md-svg-icon="icons:time"></md-icon><md-tooltip>{{::\'TIME\'| translate}}</md-tooltip></md-button></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("composite_view/CompositeView.html",'<div ng-repeat="item in $ctrl.compositeContent track by $index"><div class="pip-composite-text lp24-flex rp24-flex" ng-if="item.type == \'text\' && item.text" ng-class="{\'bm16\': $last}"><pip-markdown pip-text="item.text" pip-rebind="true" ng-disabled="true"></pip-markdown></div><div ng-if="item.type == \'pictures\' && item.picIds && item.picIds.length > 0" ng-class="$ctrl.compositeContent[$index - 1].type != \'pictures\' ? $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm16 bm16\' : \'tm16 bm0\' : $ctrl.compositeContent[$index + 1].type != \'pictures\' ? \'tm8 bm16\' : \'tm8 bm0\'" class="pip-composite-pictures lp24-flex rp24-flex"><pip-collage pip-pictures="item.picIds" pip-unique-code="item.id" pip-multiple="true" pip-open="true" pip-rebind="true" ng-disabled="$ctrl.ngDisabled"></pip-collage></div><div ng-if="item.type == \'documents\' && item.docs && item.docs.length > 0" class="pip-composite-documents layout-row layout-align-start-start flex"><pip-document-list pip-documents="item.docs" pip-document-icon="true" pip-rebind="true" ng-disabled="$ctrl.ngDisabled"></pip-document-list></div><div ng-if="item.type == \'checklist\' && item.checklist && item.checklist.length > 0" class="pip-composite-checklist lp24-flex rp24-flex"><pip-checklist-view pip-options="item.checklist" pip-changed="$ctrl.onContentChange()" pip-rebind="true" ng-disabled="$ctrl.isDisabled()"></pip-checklist-view></div><div class="pip-composite-location layout-row layout-align-start-start flex" ng-if="item.type == \'location\' && (item.loc_pos || item.loc_name)"><pip-location class="flex" pip-location-name="item.loc_name" pip-location-pos="item.loc_pos" pip-show-location-icon="true" pip-collapse="false" ng-disabled="$ctrl.ngDisabled" pip-rebind="true"></pip-location></div><div class="pip-composite-time lp24-flex rp24-flex layout-row layout-align-start-center flex" ng-if="item.type == \'time\'"><md-icon md-svg-icon="icons:time" class="lm0"></md-icon><pip-time-range pip-start-date="item.start" pip-end-date="item.end" pip-rebind="true" ng-disabled="ngDisabled()"></pip-time-range></div><div class="pip-composite-embedded lp24-flex rp24-flex layout-row layout-align-start-center flex" ng-if="item.type == \'embedded\' && item.embed_uri"><pip-embedded-view class="bm8" pip-embedded-type="item.embed_type" pip-embedded-uri="item.embed_uri"></pip-embedded-view></div></div>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("content_switch/ContentSwitch.html",'<md-button ng-click="showPictures = !showPictures; onButtonClick(\'pictures\')" aria-label="showPictures" class="md-icon-button" ng-show="showIconPicture" ng-disabled="transaction.busy()"><md-icon class="active-camera" ng-class="{ \'active-camera\': showPictures }" md-svg-icon="icons:camera"></md-icon></md-button><md-button ng-click="showDocuments = !showDocuments; onButtonClick(\'documents\')" aria-label="showDocuments" class="md-icon-button" ng-show="showIconDocument" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-document\': showDocuments }" md-svg-icon="icons:document"></md-icon></md-button><md-button ng-click="showEvent = !showEvent; onButtonClick(\'event\')" aria-label="showEvent" class="md-icon-button" ng-show="showIconEvent" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-time\': showEvent }" md-svg-icon="icons:time"></md-icon></md-button><md-button ng-click="showLocation = !showLocation; onButtonClick(\'location\')" aria-label="showLocation" class="md-icon-button" ng-show="showIconLocation" ng-disabled="transaction.busy()"><md-icon ng-class="{ \'active-location\': showLocation }" md-svg-icon="icons:location"></md-icon></md-button>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("embedded_edit/EmbeddedEdit.html",'<form name="embedded"><md-input-container class="md-block flex bm24"><label>{{ ::\'EMBEDDED_TYPE_LABEL\'| translate }}</label><md-select ng-model="$ctrl.embed_type" ng-change="$ctrl.onChangeType()" ng-disabled="$ctrl.isDisabled()"><md-option ng-repeat="t in $ctrl.embeddedTypeCollection track by $index" ng-value="t.id">{{ ::t.title | translate }}</md-option></md-select></md-input-container><md-input-container class="md-block flex"><label>{{::\'EMBEDDED_URL_LABEL\' | translate}}</label> <input ng-model="$ctrl.embed_uri" ng-required="$ctrl.embed_uri" type="url" name="url" ng-change="$ctrl.onChangeUrl()" ng-disabled="$ctrl.isDisabled()" ng-model-options="{ delay: 500 }"><div class="hint" ng-if="!embedded.url.$error">{{::\'EMBEDDED_TYPE_HINT\' | translate}}</div><div ng-messages="embedded.url.$error" role="alert"><div ng-message="url">{{ \'EMBEDDED_URL_ERROR\' | translate }}</div></div></md-input-container></form>')}])}(),function(e){try{e=angular.module("pipComposite.Templates")}catch(t){e=angular.module("pipComposite.Templates",[])}e.run(["$templateCache",function(t){t.put("embedded_view/EmbeddedView.html",'<iframe width="100%" height="170" frameborder="0" allowfullscreen="" ng-if="$ctrl.embed_type == \'youtube\'" ng-src="{{ $ctrl.embed_uri }}" style="margin: 0 auto;"></iframe><iframe width="100%" height="170" frameborder="0" allowfullscreen="" style="margin: 0 auto;" ng-src="{{ $ctrl.embed_uri }}" ng-if="$ctrl.embed_type == \'custom\'"><p><a href="{{ $ctrl.embed_uri }}">{{ $ctrl.embed_uri }}</a></p></iframe>')}])}()},{}]},{},[18,23])(23)});
//# sourceMappingURL=pip-suite-composite.min.js.map
